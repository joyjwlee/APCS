import java.util.*;
import java.io.*;

public class TweetAnalysis {
    static ArrayList<String> tweets = new ArrayList<String>();
    public void go () {
        //Preliminary processes
        Scanner input = new Scanner(System.in);
        //SOP("Doing preliminary processes");
        //initDic();
        //initTweets();
        //this.setTextFile();
        //SOP("All initialization is done");

        /*//Testing
        SOP("Enter string to find: ");
        String word = input.next();
        SOP("Index is: ");
        SOP(binarySearch(word));
        SOP("first 10 tweets");
        for (int i = 0; i < 10; i++) {
        SOP ("i: " + i + " || " + tweets.get(i));
        }*/
        Sound loading = new Sound("Loading");
        System.out.println("Processing the 63 million characters in the 45,000 tweets...\n");
        counting();
        System.out.println("Counting...\n");
        int chinaI = findOccurence("china") + findOccurence("chinese");
        int china = list.get(chinaI).getCount();
        int japanI = findOccurence("japan");
        int japan = list.get(japanI).getCount();
        int mexicoI = findOccurence("mexico");
        int mexico = list.get(mexicoI).getCount();

        int covfefeI = findOccurence("covfefe");
        int covfefe = list.get(covfefeI).getCount();
        int obamaI = findOccurence("obama");
        int obama = list.get(obamaI).getCount();
        int mediaI = findOccurence("media");
        int media = list.get(mediaI).getCount();
        int fakeI = findOccurence("fake");
        int fake = list.get(fakeI).getCount();
        int hoaxI = findOccurence("hoax");
        int hoax = list.get(hoaxI).getCount();
        int wallI = findOccurence("wall");
        int wall = list.get(wallI).getCount();
        int cnnI = findOccurence("cnn");
        int cnn = list.get(cnnI).getCount();
        int nobodyI = findOccurence("nobody");
        int nobody = list.get(nobodyI).getCount();
        int obamacareI = findOccurence("obamacare");
        int obamacare = list.get(obamacareI).getCount();
        int trumpI = findOccurence("trump");
        int trump = list.get(trumpI).getCount();
        int conI = findOccurence("con");
        int con = list.get(conI).getCount();
        int crookedI = findOccurence("crooked");
        int crooked = list.get(crookedI).getCount();
        int clintonI = findOccurence("clinton");
        int clinton = list.get(clintonI).getCount();
        int witchI = findOccurence("witch");
        int witch = list.get(witchI).getCount();
        int worstI = findOccurence("worst");
        int worst = list.get(worstI).getCount();
        int clueI = findOccurence("clue");
        int clue = list.get(clueI).getCount();
        int foxI = findOccurence("fox");
        int fox = list.get(foxI).getCount();
        int treasonI = findOccurence("treason");
        int treason = list.get(treasonI).getCount();
        int richI = findOccurence("rich");
        int rich = list.get(richI).getCount();
        int democratsI = findOccurence("democrats");
        int democrats = list.get(democratsI).getCount();
        int crazyI = findOccurence("crazy");
        int crazy = list.get(crazyI).getCount();
        int arabicI = findOccurence("saudi");
        int arabic = list.get(arabicI).getCount();
        int clownI = findOccurence("clown");
        int clown = list.get(clownI).getCount();
        int badI = findOccurence("bad");
        int bad = list.get(badI).getCount();

        int illegalI = findOccurence("illegal");
        int illegal = list.get(illegalI).getCount();
        int disgustingI = findOccurence("disgusting");
        int disgusting = list.get(badI).getCount();
        int immigrantsI = findOccurence("immigrants");
        int immigrants = list.get(immigrantsI).getCount();
        int shtI = findOccurence("shit");
        int sht = list.get(shtI).getCount();
        int bullshtI = findOccurence("bullshit");
        int bullsht = list.get(bullshtI).getCount();
        int shttyI = findOccurence("shitty");
        int shtty = list.get(shttyI).getCount();

        int pelosiI = findOccurence("pelosi");
        int pelosi = list.get(pelosiI).getCount();
        int schiffI = findOccurence("schiff");
        int schiff = list.get(schiffI).getCount();
        int bernieI = findOccurence("bernie");
        int bernie = list.get(bernieI).getCount();
        loading.stopSong();
        countdown();
        /////////////////////////////////////////////////////////////////////////////////////////////
        sleep(1000);
        System.out.print('\u000C');
        new Sound("Intro");
        sleep(1000);
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t??? ??????...");
        sleep(4800);
        System.out.print('\u000C');

        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t???v?? ????s...");
        sleep(4800);
        System.out.print('\u000C');

        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t??,??? ??? ??????...");
        sleep(4800);
        System.out.print('\u000C');

        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t??? ?????? ????? ????? ????????");
        sleep(2300);
        System.out.println("\n\n\n\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t??????????????????????????????");
        System.out.println("\t\t\t\t               \"?????\"");
        sleep(2000);
        System.out.print('\u000C');

        new Sound("Rap");

        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tBEGIN!");
        sleep(2330);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"China\" was said:\n\n\t\t\t\t\t\t" + china);
        sleep(2460);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Japan\" was said:\n\n\t\t\t\t\t\t" + japan);
        sleep(2750);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Mexico\" was said:\n\n\t\t\t\t\t\t" + mexico);
        sleep(2800);
        System.out.print('\u000C');

        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"covfefe\" was said:\n\n\t\t\t\t\t\t" + covfefe);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Obama\" was said:\n\n\t\t\t\t\t\t" + obama);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"media\" was said:\n\n\t\t\t\t\t\t" + media);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"fake\" was said:\n\n\t\t\t\t\t\t" + fake);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"hoax\" was said:\n\n\t\t\t\t\t\t" + hoax);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"wall\" was said:\n\n\t\t\t\t\t\t" + wall);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"CNN\" was said:\n\n\t\t\t\t\t\t" + cnn);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Nobody...\" was said:\n\n\t\t\t\t\t\t" + nobody);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"ObamaCare\" was said:\n\n\t\t\t\t\t\t" + obamacare);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Trump\" was said (3rd person):\n\n\t\t\t\t\t\t" + trump);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"con\" was said:\n\n\t\t\t\t\t\t" + con);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"crooked\" was said:\n\n\t\t\t\t\t\t" + crooked);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Clinton\" was said:\n\n\t\t\t\t\t\t" + clinton);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"witch\" was said:\n\n\t\t\t\t\t\t" + witch);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"worst\" was said:\n\n\t\t\t\t\t\t" + worst);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"doesn't have a clue\" was said:\n\n\t\t\t\t\t\t" + clue);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"FOX\" was said:\n\n\t\t\t\t\t\t" + fox);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"treason\" was said:\n\n\t\t\t\t\t\t" + treason);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"rich\" was said:\n\n\t\t\t\t\t\t" + rich);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Democrats\" was said:\n\n\t\t\t\t\t\t" + democrats);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"crazy\" was said:\n\n\t\t\t\t\t\t" + crazy);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"?????? \" was said:\n\n\t\t\t\t\t\t" + arabic);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"clown\" was said:\n\n\t\t\t\t\t\t" + clown);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"bad\" was said:\n\n\t\t\t\t\t\t" + bad);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"illegal\" was said:\n\n\t\t\t\t\t\t" + illegal);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"disgusting\" was said:\n\n\t\t\t\t\t\t" + disgusting);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"immigrants\" was said:\n\n\t\t\t\t\t\t" + immigrants);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"sh*t\" was said:\n\n\t\t\t\t\t\t" + sht);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"bullsh*t\" was said:\n\n\t\t\t\t\t\t" + bullsht);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"sh*tty\" was said:\n\n\t\t\t\t\t\t" + shtty);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Pelosi\" was said:\n\n\t\t\t\t\t\t" + pelosi);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Schiff\" was said:\n\n\t\t\t\t\t\t" + schiff);
        sleep(2600);
        System.out.print('\u000C');
        System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \"Bernie\" was said:\n\n\t\t\t\t\t\t" + bernie);
        sleep(2600);
        System.out.print('\u000C');

        sleep(3500);
        new Sound("Loading");
        SOP("\n\n\n\n\n\n\n\n\t\t\t\tNow Your Turn!");
        SOP("\n\n\n\n\n\n\n\n\t\tEnter a word to find out how many times Trump tweeted that very word");
        for(int i = 0; i < 10; i++ ) {
            Scanner part2 = new Scanner(System.in);
            String inputPart2 = part2.next();
            int inputI = findOccurence(inputPart2);
            int inputO = list.get(inputI).getCount();
            System.out.println("\n\n\n\n\n\n\n\n\t\t\t\tAmount of times \""+inputPart2+"\" was said:\n\n\t\t\t\t\t\t" + inputO +"\n\n");
        }
    }

    public static void sleep(int milliseconds) {
        try {
            Thread.sleep(milliseconds); }
        catch( InterruptedException ex ) {}
    }

    public static void countdown(){
        for(int i = 3; i > 0; i-- ) {
            System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t" + i);
            sleep(1000);
            System.out.print('\u000C');
        }
    }

    //Shorthand for System.out.print(ln) :)
    static void SOP (Object line) {
        System.out.println(line);
    }

    static void sop (Object line) {
        System.out.print(line);
    }

    //Accesses dictionary text file and puts all words into an arraylist
    public static void initDic () {
        try {
            Scanner input = new Scanner( new File( "dictionary.txt" ) );
            while (input.hasNext()) {
                //dictionaryWords.add( input.nextLine() );
            }
        } catch ( FileNotFoundException ex) {}
    }

    //Two-pointer, iterative binary search
    //Pre: Gets a sting
    //Post: index of word if it exists, otherwise returns -1
    /**public static int binarySearch (String s) {
    int lft = 0, rgt = dictionaryWords.size()-1, mid;
    while (lft <= rgt) {
    mid = lft + (rgt - lft) / 2; //The famous incident where Java re-wrote their built-in binary search due to overflow
    //Link to the post where I read about it last year!!
    //https://thebittheories.com/the-curious-case-of-binary-search-the-famous-bug-that-remained-undetected-for-20-years-973e89fc212

    //Return index if we found the word
    if ( dictionaryWords.get(mid).equals(s) ) return mid;
    //Update pointers accordingly otherwise
    if ( dictionaryWords.get(mid).compareTo(s) < 0 ) lft = mid + 1;
    else rgt = mid - 1; 
    }
    //Return -1 if it doesn't exist
    return -1;
    }*/

    //Accesses Json file and outputs only the tweets to the text file
    public static void initTweets () {
        //AS OF 1:30 PM PST 1/28/2020
        String everything = "";
        try {
            Scanner input = new Scanner( new File( "TweetJson.txt" ) ); //"TweetJsonSmall.txt"
            while (input.hasNext()) {
                everything = input.nextLine();
            }
        } catch ( FileNotFoundException ex) {}

        //Use formatting from Json file to isolate tweet
        // Opening: {"text":"
        String opening = "{\"text\":\"";
        int openingLen = opening.length();
        // Closing: "}
        String closing = "\"}";
        int closingLen = closing.length();

        //Use indexOf to extract tweets
        int start = everything.indexOf(opening);
        int end = everything.indexOf(closing);
        while ( start != -1 ) {
            start = everything.indexOf(opening);
            everything = everything.substring(start + openingLen);
            end = everything.indexOf(closing);
            tweets.add( everything.substring(0,end));
        }
        //Loop iterates one more time than it should, so remove last element
        tweets.remove( tweets.size()-1 );
    }

    ArrayList<Counter> list = new ArrayList<Counter>();

    public void counting() {
        long tweetNumber = 0;
        try {
            Scanner input = new Scanner( new File( "tweetsFiltered.txt" ) );
            while (input.hasNext()) {
                tweetNumber++;
                if(tweetNumber % 1000 == 0 ) System.out.println("Tweet Number:\t" + tweetNumber + "\n\tList Size:\t" + list.size());
                String l = input.nextLine().toLowerCase();
                if(l.length() > 2 && !l.substring(0,2).equals("rt")){
                    String[] split = l.split("[\\s()?!’'\"”“#,_$…]+");
                    String cleanedUp = "";

                    for(int i = 0; i < split.length; i++ ) {
                        String term = split[i];
                        if(term.length() <= 2) continue;
                        if(term.startsWith("http") || term.startsWith("@")) continue;
                        cleanedUp += term + " ";
                    }
                    //split 2
                    split = cleanedUp.split("[\\s\\d\\W]+");
                    for(int i = 0; i < split.length; i++ ) {
                        String term = split[i];
                        if(term.length() <= 2) continue;
                        boolean notAdded = true;
                        for(int n = 0; n < list.size(); n++) {
                            String phrase;
                            if(i+1 < split.length) 
                                phrase = split[i] + " " + split[i+1];

                            if(list.get(n).getWord().equals(term) ) {
                                notAdded = false;
                                list.get(n).increase();
                            }
                        }
                        if(notAdded) {
                            list.add(new Counter(term));
                            //  System.out.println(term);
                        }
                    }
                }
            } 
        }
        catch ( FileNotFoundException ex) {}
    }

    public int findOccurence(String s) {
        for(int i = 0; i < list.size(); i++ ) {
            if(list.get(i).getWord().equals(s))
                return i;
        }
        return 0;
    }
    //Writes to a text file named tweetsFiltered
    public void setTextFile () {
        String allTweets = "";
        for (String tweet : tweets) {
            allTweets += tweet;
            allTweets += "\n";
        }
        BufferedWriter writer = null;
        try {
            File logFile = new File ("tweetsFiltered.txt");
            writer = new BufferedWriter( new FileWriter(logFile) );
            writer.write( allTweets );
        } catch (Exception e) {}
        try {
            writer.close();
        } catch (Exception e) {}
    }

    /*public static void visuals(){
    countdown();

    new Sound("Intro");
    sleep(1000);
    System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t??? ??????...");
    sleep(4800);
    System.out.print('\u000C');

    System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t???v?? ????s...");
    sleep(4800);
    System.out.print('\u000C');

    System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\t??,??? ??? ??????...");
    sleep(4800);
    System.out.print('\u000C');

    System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t??? ?????? ????? ????? ????????");
    sleep(2300);
    System.out.println("\n\n\n\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t??????????????????????????????");
    System.out.println("\t\t\t\t               \"?????\"");
    sleep(2000);
    System.out.print('\u000C');

    new Sound("Rap");
    System.out.println("\n\n\n\n\n\n\n\n\t\t\t\t\tBEGIN!");
    sleep(500);
    int obamaIndex = findOccurence("obama");
    System.out.println(list.get(obamaIndex).getCount());
    sleep(3500);
    }*/
}